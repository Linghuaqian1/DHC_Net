#!/user/bin/env python3
# -*- coding: utf-8 -*-
import matplotlib.pyplot as plt
import os
import numpy as np
#

# #
labels = ["PL", "BD", "BR", "GTF", "SV", "LV", "SH", "TC", "BC", "ST", "SBF", "RA", "HA", "SP", "HC", "CC", "AP", "HL",
          "mAP50"]
networks = ["HTC", "OR", "MR", "BFM","RT" , "ATSS-O","O-Rep","YOLO8","SASM","R3Det","S2A-Net","RRF", "FCOS-O", "RHINO", "OASL", "DCFL","MTP",
            "Ours"]
# #
# #
accuracies = [
    [77.69, 77.95, 76.20, 80.12, 77.84, 77.46, 73.02, 91.89, 70.3, 75.44, 77.84, 77.58, 74.84, 79.32, 76.65, 79.49,70.98,93.62],
    [47.25, 50.29, 49.91, 54.12, 51.54, 49.55, 46.68, 72.87, 40.62, 50.95, 51.31, 49.96, 47.53, 58.33, 55.46, 55.97,50.82, 71.63],
    [41.15, 46.73, 41.61, 50.07, 45.97, 42.12, 42.37, 43.42, 37.01, 41.16, 43.72, 38.6, 40.83, 46.06, 46.33, 50.15, 43.6,46.49],
    [60.71, 65.24, 60.01, 65.68, 65.78, 62.61, 63.05, 60.95, 59.03, 61.61, 62.59, 53.82, 57.41, 65.79, 62.49, 61.59,59.25, 64.46],
    [41.77, 42.61, 41.08, 43.98, 43.25, 45.15, 47.06, 62.13, 40.21, 41.11, 47.51, 54.97, 43.89, 57.25, 53.18, 49.01,43.55,63.03],
    [52.79, 54.56, 50.77, 60.07, 55.03, 48.4, 50.28, 79.11, 45.46, 45.76, 50.58, 57.12, 47.72, 58.38, 56.62, 55.33,56.5, 78.61],
    [58.87, 60.02, 56.24, 67.85, 60.38, 51.7, 58.64, 85.79, 44.6, 49.65, 57.86, 68.93, 55.66, 68.53, 66.16, 59.31,61.41, 86.23],
    [78.74, 79.08, 78.01, 79.11, 79.45, 78.43, 78.84, 94.51, 78.58, 78.52, 80.73, 77.88, 78.61, 80.46, 80.75, 81.81,78.23, 94.56],
    [55.22, 61.69, 55.85, 64.38, 62.98, 59.33, 57.12, 60.78, 49.34, 54.97, 59.11, 59.59, 57.86, 63.27, 63.07, 66.52,61.41, 64.42],
    [58.49, 59.42, 57.48, 60.56, 59.85, 62.65, 66.77, 75.22, 60.73, 60.79, 65.32, 71.92, 63, 73.01, 63.03, 66.52, 51.3,64.42],
    [38.57, 42.26, 36.62, 45.98, 46.89, 39.18, 35.21, 42.36, 29.89, 42.07, 36.43, 40.17, 38.02, 48.69, 44.89, 52.87,42.89, 50.78],
    [52.48, 56.89, 51.67, 58.26, 56.53, 52.43, 50.76, 56.53, 46.57, 53.20, 52.60, 51.22, 52.38, 57.8, 55.68, 56.71,50.6, 59.36],
    [49.58, 51.11, 47.39, 58.31, 54.06, 42.92, 48.77, 75.99, 42.95, 43.08, 45.36, 53, 41.91, 56.21, 54.24, 57.83,56.84, 76.13],
    [56.18, 56.16, 55.79, 64.82, 56.71, 53.98, 51.62, 68.35, 48.31, 49.55, 52.46, 57.12, 53.24, 60.04, 59.04, 58.13,58.31, 69.51],
    [54.09, 59.33, 59.06, 69.84, 51.65, 42.71, 34.23, 48.51, 28.13, 34.09, 40.12, 49.66, 40.22, 59.06, 59.15, 60.35,59.55, 47.32],
    [4.2, 25.81, 3.64, 32.78, 21.31, 5.91, 6.17, 2.24, 1.82, 36.26, 0, 25.42, 7.15, 42.7, 35, 35.66,49.21, 0.397],
    [66.38, 60.67, 60.26, 89.37, 68.05, 67.09, 64.66, 33.82, 76.37, 68.65, 62.81, 66.92, 65.51, 78.96, 77.81, 78.65,84.73, 48.96],
    [11.92, 9.17, 8.95, 11.07, 8.32, 10.68, 5.87, 0.15, 0.74, 0.06, 11.11, 5.17, 7.42, 12.84, 14.65, 13.03,13.09, 1.17]
]
#
colors = ['b', 'g','navy',  'c', 'm', 'y', 'k', 'orange', 'purple', 'brown', 'pink', 'olive', 'lime', 'cyan', 'teal',
          'indigo', 'gray', 'gold', 'r','blue']
#
#
# 绘制折线图
plt.rcParams.update({'font.size': 8})
for i,  accuracy in enumerate(accuracies):

    file_names=['1.png','2.png','3.png','4.png','5.png','6.png','7.png','8.png','9.png','10.png','11.png','12.png','13.png','14.png','15.png','16.png','17.png','18.png']
    file_paths=[os.path.join('',j) for j in file_names]

    plt.figure(figsize=(6, 3))
    max_y = max(accuracy)
    min_y = min(accuracy)
    # 设置y轴上限为最高点加5
    plt.ylim(min_y-3, max_y + 5)
    plt.plot(networks, accuracy, marker='o', color=colors[i])
    plt.title(f'mAP50 of {labels[i]}',fontsize=12)
    # plt.xlabel('Models', labelpad=2,fontsize=12)
    plt.xticks(rotation=45,fontsize=9)
    plt.ylabel('mAP50 (%)',fontsize=12)
    # plt.legend()
    plt.tight_layout()
    plt.savefig(file_paths[i])
    plt.show()


#
# # accuracy = [58.69, 50.34, 53.64, 49.47, 53.28, 53.28, 48.51, 61.21, 49.57, 48.95, 57.66, 57.18, 47.26, 58.51, 49.86, 44.53, 63.01]
# # networks = ['Model1', 'Model2', 'Model3', 'Model4', 'Model5', 'Model6', 'Model7', 'Model8', 'Model9', 'Model10', 'Model11', 'Model12', 'Model13', 'Model14', 'Model15', 'Model16', 'Model17']
#
# colors1 = ['skyblue'] * (len(networks) - 1) + [(1, 0, 0, 0.6)]
#
#
# plt.figure(figsize=(10, 6))
# bars = plt.bar(networks, accuracy, color=colors1)
#
# for bar, acc in zip(bars, accuracy):
#     plt.text(bar.get_x() + bar.get_width() / 2, bar.get_height(), f'{acc}', ha='center', va='bottom')
#
# plt.title('mAP50 of All Class',fontsize=16)
# plt.xlabel('Models', labelpad=10,fontsize=16)
# plt.ylabel('mAP50 (%)',fontsize=16)
# plt.xticks(rotation=45, fontsize=12,ha='right')
# plt.ylim(min(accuracy) - 3, max(accuracy) + 5)
#
# plt.tight_layout()
# plt.show()

